---
title: 
date: 2022-04-18 16:58:50
categories:
- security
tags:
- 
toc: true
---
**摘要：计网和web安全面试题收集**
<!-- more -->
---
# 一.
1.计算机网络的TCP协议和UDP协议的区别？
答：
    TCP是面向连接的，可靠的传输层协议；UDP是非面向连接的、不可靠的传输层协议。TCP多应用于对稳定性、可靠性要求较高的场合，比如邮件传输等；UDP多应用于对稳定性、可靠性要求不高的场合，比如视频的缓存等。

2.VPN（虚拟专用网络）工作在 工作在 网络层- 层,SSL(Secure Sockets Layer 安全套接字协议)工作在 传输 层?

3. TCP协议如何建立和释放连接的。
三次握手：
1、客户端发送连接请求到服务器；2、服务器发确认请求给客户端；3、客户端回复对服务器确认报文的确认。
第一次握手：建立连接时，客户端A发送SYN包（SYN=j）到服务器B，并进入SYN_SEND状态，等待服务器B确认。
第二次握手：服务器B收到SYN包，必须确认客户A的SYN（ACK=j+1），同时自己也发送一个SYN包（SYN=k），即SYN+ACK包，此时服务器B进入SYN_RECV状态。
第三次握手：客户端A收到服务器B的SYN＋ACK包，向服务器B发送确认包ACK（ACK=k+1），此包发送完毕，完成三次握手。

四次挥手：
1、客户端向服务器发送链接释放报文；2、服务器对客户端的释放报文进行确认；
3、客户端收到服务器的确认报文后，等待服务器的链接释放报文；4、服务器发送完数据后向客户端发送链接释放报文；5、客户端收到链接释放报文后，回复服务器确认报文，服务器收到报文后，向客户端发送确认报文并停止链接。6、客户端收到确认报文，停止链接

客户端A发送一个FIN，用来关闭客户A到服务器B的数据传送。
服务器B收到这个FIN，它发回一个ACK，确认序号为收到的序号加1。
服务器B关闭与客户端A的连接，发送一个FIN给客户端A。
客户端A发回ACK报文确认，并将确认序号设置为收到序号加1。

tcp为什么要三次握手，tcp为什么可靠。
为什么不能两次握手：（防止已失效的连接请求又传送到服务器端，因而产生错误）
假设改为两次握手，client端发送的一个连接请求在服务器滞留了，这个连接请求是无效的，client已经是closed的状态了，而服务器认为client想要建立
一个新的连接，于是向client发送确认报文段，而client端是closed状态，无论收到什么报文都会丢弃。而如果是两次握手的话，此时就已经建立连接了。
服务器此时会一直等到client端发来数据，这样就浪费掉很多server端的资源。

为什么建立连接是三次握手，而关闭连接却是四次挥手呢？
这是因为服务端在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。而关闭连接时，当收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，我们也未必全部数据都发送给对方了，所以我们不可以立即close，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，我们的ACK和FIN一般都会分开发送。

4.两个服务器之间网络已经联通了，却收不到彼此的UDP报文，请问是什么问题（我被考到的，肯定是网络…）**
UDP协议没有流量控制、拥塞控制，会不会就是因为网络拥塞的原因？

5.http是不是可以换做ftp，为什么？
不可以，两者适用范围不同。
文本传输协议(HTTP，HyperText Transfer Protocol) 是互联网上应用最为广泛的一种网络协议；文件传输协议（File Transfer Protocol, FTP）是一个可以用于跨平台（在两台装有不同操作系统的机器上）传输计算机文件的软件标准。
HTTP是面向网页的，而FTP是面向文件的。

6.计算机网络ISO分为几层？一般应用几层？为什么去掉某几层？讲讲每层的应用

应用层 为用户的应用程序提供网络接口
表示层 数据格式转换
会话层 数据同步过程中的会话管理。
传输层 提供可靠的端到端的透明传输
网络层 提供逻辑编址，数据寻址和最佳路由
数据链路层 建立相邻节点间的数据链路，在有差错的物理介质上无差错的传输数据帧
物理层 比特流的传输

7.TCP本身是三次握手的，如果变成两次握手会不会发生死锁，什么情况下会发生死锁。这道题目还是很容易的。
server收到失效的连接请求报文段后，就误认为是client再次发出的一个新的连接请求。于是就向client发出确认报文段，同意建立连接。假设不采用“三次握手”，那么只要server发出确认，新的连接就建立了。由于现在client并没有发出建立连接的请求，因此不会理睬server的确认，也不会向server发送ack包。

8.身份认证，说出几个身份认证方式。这个是网络安全里面的身份认证协议那一方面的内容，也不难。
用户名/密码方式；IC卡认证；动态口令 ；生物特征认证
网络安全原理那一块内容

9.知不知道https
HTTPS 协议是由 HTTP 加上 TLS/SSL 协议构建的可进行加密传输、身份认证的网络协议，主要通过数字证书、加密算法、非对称密钥等技术完成互联网数据传输加密，保护交换数据的隐私与完整性。
HTTP是超文本传输协议，是一个基于请求与响应，无状态的，应用层的协议，常基于TCP/IP协议传输数据，互联网上应用最为广泛的一种网络协议,所有的WWW文件都必须遵守这个标准。设计HTTP的初衷是为了提供一种发布和接收HTML页面的方法。
SSL(Secure Sockets Layer 安全套接字协议),及其继任者传输层安全（Transport Layer Security，TLS）是为网络通信提供安全及数据完整性的一种安全协议。TLS与SSL在传输层与应用层之间对网络连接进行加密。

10.计算机网络可以分几层，两种分法各自层的名称，再问了几个网络协议属于第几层，
大佬链接：https://www.cnblogs.com/imstudy/p/11966320.html
ISO组织提出的OSI七层模型TCP/IP 五层模型：

应用层协议：HTTP（超级文本传输协议，访问万维网的载体）、SMT（简单邮件传输协议，电子邮件服务的主要协议）、FTP（文件传输协议，用于将文件从一台主机传输到另一台主机）、TELNET（远程登录）、SSH（安全外壳、用于访问远端的站点）、SNMP（简单网络管理协议）、DNS(域名系统）等。
传输协议：TCP协议，面向连接的协议，提供流量控制、差错控制以及拥塞控制；UDP协议，无连接的协议，不提供流量控制、差错控制或拥塞控制。
网络层主要协议：IP（因特网协议），其定义了在网络层称为数据报的分组格式。IP是一个无连接的协议，不提供流量控制、差错控制和拥塞控制服务。


## 2.三次握手
三次握手是指建立一个 TCP 连接时，需要客户端和服务器总共发送3个包
第一次握手([SYN], Seq = x) 客户端发送一个SYN标记的包，Seq初始序列号x，发送完成后客户端进入SYN_SEND状态
第二次握手([SYN,ACK], Seq = y, ACK = x + 1)服务器返回确认包(ACK)应答，同时还要发送一个SYN包回去。ACK = x + 1,表示确认收到(客户端发来的Seq值 + 1)，Seq= y, 表示让客户端确认是否能收到。发送完成后服务端进入SYN_RCVD状态
第三次握手([ACK], ACK = y + 1) 客户端再次发送确认包(ACK),ACK = y + 1,表示确认收到服务器的包（服务端发来的Seq值 +1）。客户端发送完毕后，进入ESTABLISHED状态，服务端接收到这个包，也进入ESTABLISHED状态, TCP握手结束

为什么要建立TCP连接要三次握手呢？
为了确认客户端和服务器的接收与发送能力是否正常
第一次握手：客户端向服务器发送包，服务端收到了。这样服务端就能知道：客户端的发送能力、服务端的接收能力是正常的
第二次握手：服务端向客户端发送确认包应答，客户端收到了。这样客户端就能知道：服务端的接收、发送能力，客户端的接收、发送能力是正常的。不过此时服务器并不能确认客户端的接收能力是否正常
第三次握手：客户端再次发送确认包，服务端收到了。这样服务端就能得知道：客户端的接收、发送能力正常，服务器自己的发送、接收能力也正常
## 3.四次挥手
断开一个TCP连接,需要客户端与服务器发送四个包来确认连接的断开。由于断开连接的过程中是保证数据不再发送了,才能够断开
因为TCP是全双工的,因此,每个方向都要单独关闭
当一方完成数据发送任务后,发送一个FIN来终止这一方向的连接,收到一个FIN只是意味着
一方向不会再收到数据了,但是这个TCP连接上仍然能够发送数据,直到这一方也发送了FIN.
首先进行关闭的一方执行主动关闭,另一方执行被动关闭.第一个关闭的最后等待2MSL
第一次挥手:Client将FIN置为1,序号seq=M,发送给Server,进入FIN_WAIT_1状态
第二次挥手：Server收到后,将ACK置为1,ack=M+1,响应给Client,进入CLOSE_WAIT状态
Client收到响应后,进入FIN_WAIT_2状态
第三次挥手：Server在结束所有数据传输后,将Fin置为1,seq=N+1,发送给Client,进入
LAST_ACK状态
第四次挥手：Client收到后,将ACK置为1,ack=N+1,响应给Server,进入TIME_WAIT状态,等待
    2MSL后,进入CLOSED状态
Server收到后,进入CLOSED状态
![20220515011033](https://s2.loli.net/2022/05/15/rTFxpLO4U9vZJ12.png)

## 4.IP协议的首部结构 
首部协议一共是20个字节（固定）
第一个4字节： 版本号；首部长度； 服务类型；总长度；
第二个4字节：标识；标志；片偏移；
第三个4字节：生存时间；协议；校验和；
第四个4字节：源ip地址；
第五个4字节：目的ip地址；

# 三、web安全
## 1.常见的报错注入函数
如果我们的输入能引起数据库报错就可以用报错注入，比较常规的就三个updatexml、extractvalue、floor
floor函数向下取整函数，经常搭配计数函数count和伪随机数函数rand使用

extractvalue(参数1，参数2)

参数1：xml文档字符串
参数2：xpath格式字符串

该函数主要用来查找并解析xml文档

updatexml(参数1，参数2，参数3)

参数1：xml文档字符串
参数2：xpath格式字符串
参数3：替换字符串

该函数主要用来查找替换并解析xml文档，但是不会保存到数据库

两个函数的报错原理其实都一样，都是因为第二个参数不采用xpath格式的字符导致数据库报xpath格式错误，利用concat()函数把一个特殊字符与xpath连接在一起就可以报错。

## 2.文件上传的漏洞原因
开发者没有对上传的文件后缀名作检测和过滤
防护方法有：黑白名单、单独创建一个上传目录限制权限、放沙盒、加上特殊字符过滤机制
绕waf方法：
先判断是客户端检测还是服务端检测，如果是客户端就通过 burp抓包中间人绕过
文件幻数检测：在文件幻数后面加上木马
文件大小检测：就在一个完整的文件插入木马
文件后缀名检测：尝试一些不在黑名单的后缀名，大小写，下划线表示空格绕过
中间解析件绕过(IIS5和6、apache)
## 4.dirsearch/dirmap
扫目录的功能,自己尝试写(go,python)
整体的功能模块：指定一个字典让它去扫,api探测,对404页面做判断(404并不一定没有东西，有时候那个路径下还有一层递归)
要加快扫描速度有2种方法：多线程、异步
有时404页面会在后端统一处理成200，要怎么检测这种错误页面：
可以输入一个随机字符串作为目录路径，如果返回200，把这个页面记录下来，用python里的dif来判断相似度，如果相似度很高就可以认为这个页面是错误页面

## 5.sqlmap
os-shell的原理(mysql)：可以执行系统命令，一般是先传一个马作为一个上传，再传一个马作为命令执行，退出的时候会自动把马清除掉

## 6.sql注入绕waf的方式
跑关键字字典，

## 7.IIS搭建的网站如何找漏洞？
先看版本(5和6)

## 8.XSS除了盗取Cookie还能干嘛？
转发邮件、记录键盘、钓鱼、转发邮件、刷流量
劫持后台、纂改页面、

## 9.手工检测webshell
正则表达式检测pHp,eval之类的

## 10.正向连接和反向连接
在要攻击的服务器有端口，从我这边直接连到它
在要攻击的服务器上运行个程序，使它连接我

## 11.写爬虫有哪些常用的模块？
request,正则函数,beautifulsoup4



---

